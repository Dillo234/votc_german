
namespace = mcc_event_v2

## EVENTS BELOW ARE NEW ONES FOR MULTICHAR CONVOS


#Travel arrival event
mcc_event_v2.1001 = {
	type = character_event
	theme = faith
	title = mcc_event.1001.title
	desc = mcc_event.1001.desc
	left_portrait = {
		character = scope:recipient
	}
	
	option ={
		name = talk_scene_throneroom_string
		
		trigger = {can_talk_in_throneroom = yes}
		
		set_global_variable = {
			name = talk_scene
			value = flag:talk_scene_throneroom
		}
		
		trigger_event = mcc_event_v2.9001	
	}
	
	option ={
		name = talk_scene_garden_string
		
		
		trigger = {can_talk_in_garden = yes}
		
		set_global_variable = {
			name = talk_scene
			value = flag:talk_scene_garden
		}
		trigger_event = mcc_event_v2.9001
	}
	
	option ={
		name = talk_scene_bedchamber_string
		trigger = {can_talk_in_bedchamber = yes}
		
		set_global_variable = {
			name = talk_scene
			value = flag:talk_scene_bedchamber
		}
		
		
		trigger_event = mcc_event_v2.9001
	}	
	
	option ={
		name = talk_scene_dungeon_string
		
		trigger = {can_talk_in_dungeon = yes}
		
		set_global_variable = {
			name = talk_scene
			value = flag:talk_scene_dungeon
		}
		trigger_event = mcc_event_v2.9001
	}
	
	option ={
		name = talk_scene_feast_string
		
		trigger = {can_talk_in_feast = yes}
		
		set_global_variable = {
			name = talk_scene
			value = flag:talk_scene_feast
		}
		trigger_event = mcc_event_v2.9001
	}
	
	option ={
		name = mcc_event.1001.exit
	}
}

mcc_event_v2.1002 = {
	type = character_event
	theme = diplomacy_family_focus
	title = mcc_event.1002.title
	desc = mcc_event.1002.desc
	window = character_event

#	immediate = {
#		clear_variable_list = mcc_characters
#		scope:actor.location = {
#			every_character_in_location = {
#				limit = { 
#					is_alive = yes
#					not = { any_player = { this = prev } }
#				}
#				scope:actor = {
#					add_to_variable_list = {
#						name = mcc_characters
#						target = prev
#					}
#				}
#			}
#		}
#	}
#	
#	widget = {
#        gui = "mcc_select_characters"
#        container = "custom_widgets_container"
#    }

	option ={
		name = mcc_characters_selection_done_string
		trigger_event = mcc_event_v2.9001
	}
	
	option ={
		name = mcc_event.1002.exit
	}
}

#hidden Event fired when initating conversation with someone. 
#The only reason this exist is to open the 'event_window_widget_talk' gui event widget, so we can copy the data to the clipboard using the EventWindowData.CopyToClipboard guifunction.
mcc_event_v2.9001 = {
	type = character_event
	title = "aha"
	theme = clipboard_transfer_event_theme
	desc = talk_event.9001.desc

	immediate = {
		scope:recipient = {
			log_gamedata_v3 = yes
		}
		
	}
	
	#this widget is what calls the EventWindowData.CopyToClipboard guifunction, 
	widget = {
        gui = "event_window_widget_talk_v2"
        container = "custom_widgets_container"
    }
	

	#option ={
	#	name = "debug"
	#}
}

#close talk window
mcc_event_v2.9002 = {
	type = character_event
	title = "aha"
	window = fullscreen_event
	theme = clipboard_transfer_event_theme
	desc = talk_event.9002.desc

	widget = {
        gui = "event_window_widget_talk_close_v2"
        container = "custom_widgets_container"
    }
	
	immediate = {
		remove_global_variable = talk_pose
		every_in_global_list = {
			variable = mcc_characters_list_v2
			remove_variable = talk_pose
		}
		
		remove_global_variable = mcc_character_0
		remove_global_variable = mcc_character_1
		remove_global_variable = mcc_character_2
		remove_global_variable = mcc_character_3
		remove_global_variable = mcc_character_4
		remove_global_variable = mcc_character_5

		clear_global_variable_list = mcc_characters_list_v2
	}
}

## action event
mcc_event_v2.9003 = {
	type = character_event
	title = "aha"
	window = fullscreen_event
	theme = clipboard_transfer_event_theme
	desc = talk_event.9003.desc
	
	widget = {
        gui = "event_window_widget_talk_clear"
        container = "custom_widgets_container"
    }
	

}
